{% extends 'network/layout.html' %}
{% load static %}

{% block title %}
    
    {{profileuser.username}} | Network
   
{% endblock %}

{% block body %}

		<br/>
		
	<div class="sidenav">
	<center>
    <div class="card border-light" style="width: 18rem;">
    <img class="card-img-top" src="https://cdn.pixabay.com/photo/2018/04/18/18/56/user-3331256__340.png" alt="User">
    	
    <h2 class="details-name"><b>{{profileuser.username}}</b></h2>
        
    <h6 class="details-follow" >Followers: <b>{{follower}}</b></h6>
    <h6 class="details-follow">Following: <b>{{following}}</b></h6>
    <h6 class="details-follow">Posts: <b>{{postcount}}</b></h6>
        {% if user.username != profileuser.username %}
            
            {% if not follow %}
            <form class="text-right" method="post" action="{% url 'profile' username=profileuser.username %}">
                {% csrf_token %}
                <center>
                <button class="btn btn-primary" type="submit" value="Follow">Follow <i class="fa fa-twitter"></i></button>
                </center>
            </form>

            {% elif follow %}
            <form class="text-right" method="post" action="{% url 'profile' username=profileuser.username %}">
                {% csrf_token %}
               <center>
               <button class="btn btn-primary" type="submit" value="Unfollow">Unfollow <i class="fa fa-twitter"></i></button>
               </center>
            </form>

            {% endif %}

        {% endif %}
        <br/>    
    </div>
    </div>
   </center>

<br/>

    <div class=container>

    {% for post in pageObject %}
    <div id=card class="card  text-light bg-dark mb-3" style="max-width: 20cm;">
        <h5 class="card-header" style="font-family: sans-serif;background-color: #9E9E9E "><a href="{% url 'profile' username=post.user %}"><i class="fa fa-user-circle" style="color: #1A237E"> <b style="color: #1A237E"> {{post.user}}</b></i></a></h5>
        <div class="card-body">
            <small class="card-subtitle mb-2 text-muted">{{post.date}}</small>
            <p class="card-text">{{post.postBody}}</p>
            {% if user.is_authenticated %}

                {% if request.user == post.user %}
                <a href="{% url 'edit' postID=post.id%}" class="edit">Edit <i class="fa fa-pencil"></i></a>
                <p> {{post.likes.all.count}} likes</p>

                {% elif request.user in post.likes.all %}
                    <a class="likebutton" href="#" data-catid="{{ post.id }}" id="{{post.id}}" data-total="{{post.likes.all.count}}"  data-value="Unlike" value="submit"><i class="fa fa-heart" id="heart{{post.id}}" style="color:#ff1493;"></i></a><span id="likes{{post.id}}"> {{post.likes.all.count}} </span>
                    
                    {% else %}
                    <a class="likebutton" href="#" data-catid="{{ post.id }}" id="{{post.id}}" data-total="{{post.likes.all.count}}"  data-value="Like" value="submit"><i class="fa fa-heart" id="heart{{post.id}}" style="color: white; "></i></a><span id="likes{{post.id}}" > {{post.likes.all.count}} </span>
                {% endif %}

            {% else %}
                <p>Likes: {{post.likes.all.count}}</p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
	</div>


{%if pageObject %}

<div>
    <ul class="pagination justify-content-center">
        {% if pageObject.has_previous %}
            <li class="page-item"><a href="?page=1" class="page-link">&laquo; </a></li>
            <li class="page-item"><a href="?page={{ pageObject.previous_page_number }}" class="page-link">Previous</a></li>
        {% else %}
            <li class="page-item disabled"><a class="page-link">&laquo; </a></li>
            <li class="page-item disabled"><a class="page-link">Previous</a></li>
        {% endif %}
            <li class="page-item"><a class="page-link">{{ pageObject.number }}</a></li>
        {% if pageObject.has_next %}
        	<li class="page-item"><a href="?page={{ pageObject.next_page_number }}" class="page-link">Next</a></li>
        	<li class="page-item"><a href="?page={{ pageObject.paginator.num_pages }}" class="page-link"> &raquo;</a></li>
        {% else %}
        	<li class="page-item disabled"><a class="page-link">Next</a></li>
        	<li class="page-item disabled"><a class="page-link"> &raquo;</a></li>
        {% endif %}
    </ul>
</div>
{% endif%}

{% endblock %}